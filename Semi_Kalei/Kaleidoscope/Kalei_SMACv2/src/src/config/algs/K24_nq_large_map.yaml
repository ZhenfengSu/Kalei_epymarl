# --- K-2:4 NQ Configuration for Large SMACv2 Maps ---
# Optimized for large, complex maps like corridor, 27m_vs_30m
# Emphasizes heterogeneity and adaptive exploration

action_selector: "epsilon_greedy"
epsilon_start: 1.0
epsilon_finish: 0.05
epsilon_anneal_time: 50000
evaluation_epsilon: 0.0

runner: "episode"
buffer_size: 5000
target_update_interval_or_tau: 200

obs_agent_id: True
obs_last_action: False

standardise_returns: False
standardise_rewards: True

agent_output_type: "q"
agent: "k24_type_rnn_1R3"
mac: "Kalei_type_n_mac"
learner: "k24_nq_learner"
double_q: True
mixer: "qmix"
use_rnn: True
mixing_embed_dim: 32
hypernet_layers: 2
hypernet_embed: 64

name: "K24_nq_large_map"

# --- Large Map Optimization ---
K24_args:
  # Slower annealing for more exploration
  temperature_init: 6.0
  temperature_min: 0.1
  anneal_start: 0.0
  anneal_end: 0.9                # Extended annealing period
  anneal_end_step: 900000        # Longer training

  ema_momentum: 0.99
  hetero_init_scale: 0.02        # Larger initial scale

  # Stronger diversity for complex strategies
  div_coef: 0.25                 # High diversity
  deque_len: 100

  # More frequent resets for adaptation
  reset_interval: 5000            # Frequent resets
  reset_ratio: 0.15               # Reset more coefficients

  # Enable adaptive reset for dynamic environments
  use_adaptive_reset: True
  kl_threshold: 0.08             # More sensitive threshold
